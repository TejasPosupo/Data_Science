in this video we are going to do outlier

detection and removal outliers are the

data points which are data errors or

sometimes they are not data errors but

they just represent the extreme

variation you know data set so that

although they are valid it makes sense

to remove them otherwise they can create

some issues later on we can apply now

different techniques to detect the

outliers and remove them and these

techniques are I you either use like

standard deviation for example or you

can use a simple or domain knowledge one

of the things in realistic domain is

that when you have let's say two-bedroom

apartment

it cannot be a 500 square foot in total

area right usually see look at all these

guys right like here is 1056 square foot

but it is 2 BHK so if you just divide

this by

2 BHK you get like 500 for example okay

here also 2600 you divide by 4 and you

get around 600 to 700 so we want to

first look at any data rows where the

square foot poor bedroom is less than

some threshold okay so as the data

scientist now you go to your business

manager who is a real estate expert and

you ask him this question what is a

typical square foot per bedroom okay and

he will tell you that it is around 300

so if you have any case for example you

have let's say let's say you have 600

square foot home and the total number of

bedrooms are 6 then it means it's 100

this this seems very unusual he tells

you that 300 square foot per bedroom is

a typical threshold so using that

criteria now you will examine your data

set and try to find out on the

properties where this threshold is not

mad

and the way you do that is you will

divide a total square foot by BHK and

you will see okay if it is less than 300

show me the value so you will print this

data frame these data points and you

will go to your business manager and

show it to him he will look at this and

he'll say hmm thousand square feet home

and six bedroom whole kitchen that is

unusual okay

so he will ask you to remove that

similarly you have 600 square foot home

but the total number of beds are 8 right

so these are like clearly data errors or

anomalies or outliers whatever you want

to call it and you can safely remove

them ok so we are going to remove all

these data points so first let's see how

many rows we have in our data frame so

we have around 13,000 and now I am going

to remove this so the way you remove it

is you create a new data frame called

df6 and here I want to negate this ok so

if you want to filter all these rows you

do negate on your criteria and then df6

dot shape when you run it you see you

remove some outliers now your number of

rows are 1200 502 okay so this is one of

the ways of removing outliers now we can

have even more outliers for example

let's check price per square foot okay

so I am going to check price per square

foot I want to look at all the

properties where price per square foot

is either very very high or very very

low and first I will do is you can say

DF 6 2 times per square foot dot

described described method gives you

some basic statistics on that particular

column when you run it you find that the

minimum

value is 267 rupees per square foot

although in Bangalore to get a property

with 267 rupees per square foot is very

very low you know it's very unlikely and

similarly you have this property where

the price per square foot is extremely

high now this is possible if the

property is in a very prime area but as

we are going to build a generic model it

makes sense to remove this kind of

extreme cases okay so we are going to

write a function that can remove these

extreme cases based on standard

deviation now if you know about mean and

standard deviation the if your data set

has a normal distribution which we are

assuming that our data set should have a

normal distribution then most of the

data points around I think 68% data

points should lie between mean and one

standard deviation okay so we are going

to filter out anything which is beyond

one standard deviation okay now if you

don't know the statistical theory about

standard deviation then you can pause

the video and just follow some basic

tutorials on what standard deviation is

etcetera it's a pretty simple concept

okay so I will write now a function

which can remove price per square foot

outliers or location now you have to do

this poor location because some

locations will have high price some

location will have less price so what

you want to do is poor location you want

to find mean and standard deviation and

then filter out any data points which

are beyond one standard deviation okay

and that function will look something

like this here what I am doing is I am

taking data frame as an input and I am

grouping them by location first and poor

location I get this sub data frame for

which I am calculating mean M is mean

and St standard deviation and then I am

filtering all those data points which

beyond the standard deviation which

means anything above mean minus one

standard deviation and anything below

mean plus ten one standard deviation I

will keep it in my reduced data frame

and then I will keep on appending those

data frames per location and this will

give me the output data frame okay so

let's call this function on my DF 7 DF 6

so when I call it on the f 6 I get DF 7

as an output and when I run it what we

did is we remove price per square foot

outlier from DF 6 and now we have a new

data frame DF 7 which has 10,000 data

points okay the previous one had 12,000

502 so be removed

close to 2,000 outliers from our data

set now one more thing we want to check

in our data set is whether the property

prices for 3-bedroom Apartments are more

than the property price of two-bedroom

apartment or not for the same square

foot area for example here we are

looking at two properties same square

foot around like 1200 square foot but

you see that the t 3 bedroom price is 81

lakh whereas the two-bedroom price is 1

crore 27 lakh so although the square

field is same the less number of

bedrooms you have the property price is

higher now this could be due to many

reasons we don't know right it could be

because of the property is in some

location where there are special

amenities or anything else right we

don't know what the reason is but this

is the behavior we see in our data set

and if you want to do some visualization

of how many such cases we have ok

for which I'm going to write a function

which will use a scatter plot to give me

this visualization okay and that

function I have already created I am

just going to copy

here so just let me walk you through

this function what this function is

doing is it is drawing a scatterplot on

which it will plot two bedroom and three

bedroom apartment okay let me just run

this function okay and then we'll go

over this function so this function

takes a location and a data frame as

input so I have the f7 and I'm going to

run this function for Raja Nagar

location and when I do that what I find

is this scatter plot so here blue points

are two bedroom apartments and green

markers are three-bedroom whole kitchen

properties x-axis has total square foot

area and the y axis has price per square

feet okay I can have price per square

foot or maybe price let me do price when

I plot this what I find is I have in

same so if you look at a vertical line

for same square foot area for example

look at this particular line right

around 1700 square foot area the

two-bedroom apartment prices are higher

than three-bedroom see I have these four

data points where these are like

two-bedroom Apartments whose values are

higher than three bedrooms okay here

also you see some cases so I want to

remove some of these outliers okay and

okay let's go over this function so this

function creates two different data

frames where for same location you will

have data points for two bedroom and

three bedroom apartments and then we'll

plot a scatter plot using these two

lines okay and that's it alright now you

can run the same function for a

different location okay I'm going to run

it in Hebel location as well

and they're also I find many cases see

here like all these blue data points

have higher value than green so which

means two-bedroom price is higher than

three okay so I want to do some data

cleanup in this area for which I have

again return a function for removing the

outliers so this function what it will

do is it will create poor bedroom homes

it will create some statistics okay so

the kind of statistics it will create is

I will create a dictionary like this

where this is one bedroom apartment

homes okay for which I will calculate a

mean standard deviation and count and

then what I will do is I will filter out

all the 2-bedroom apartments whose mean

value like whose value not mean value

whose value is less than let's say mean

because you would think that your

2-bedroom apartment home for the same

square foot area should have a little

higher value than one bedroom okay so

essentially that's what I am trying to

do in this particular function so here

first

I am doing location group I going

through every location there frame and

for every location data frame I am again

creating new data frames based on BHK

and poor BHK data frame and k computing

mean standard deviation and count okay

and once that for loop is over I am

running the same for loop again and

trying trying to exclude those data

points which lies beyond the whose value

of price per square foot is less than

the mean of the previous BHK for example

for two-bedroom apartment I will try to

filter all those property values whose

price per square foot is less than the

of this one a bedroom mean okay so we

can do this and you can create df8 where

I will call this remove function and

then say the f8 dot shape so when I run

it it's gonna take some time but see it

removed so many data points and now I

have seven thousand three hundred

twenty-nine left after this is done I

can again plot the same scatter plot to

see what kind of improvement it has done

and when I do that I will have to supply

the f8 here when I do that you will

notice that see all this green data

points that I had in this area those

data points are gone now so majority of

the data points for three bedroom

apartment and this is Green is three has

higher value than two I mean I still

have some data points here green it is

very kind of difficult to exactly remove

those data points so this kind of

abnormalities are going to be present

and it is I think it is fine to have

such abnormalities once this outliers

are removed now I want to plot a

histogram and I want to see how many

apartments or how many properties I have

in poor per square foot area okay so

when I run this code what I find is

majority of the property so here on the

x axis I have price per square foot the

y axis is a histogram so it shows number

of data points in that category so like

from 0 to 10,000 rupees per square foot

range

I have majority of my data points you

can see this is normal distribution kind

of like a Gaussian curve right so it's

like a bell Kohi

and I see that my data set has a normal

distribution it looks it looks good at

this point now let's explore the

bathroom feature okay so we have this

feature called bathrooms and I want to

see the unique values here and you can

see that there are properties which has

even like 13 bathrooms okay and I'm just

naturally curious like in Banglore you

have these homes which with greater than

like 10 bathrooms and some of these are

kind of okay so see if you Hotel

thousand square-foot home which is

pretty big then having 10 bedroom then

having 12 the bathroom is okay all right

so then I again go to my business

manager and I ask him is there criteria

you have to remove the bathroom specific

outliers basically he will tell you that

anytime you have number of bathrooms

which are greater than number of bedroom

whole kitchen usually when you have two

bedroom apartment you have two bathrooms

you can sometimes you can have even

three but you can it is very unusual to

have like four so let's say you have two

bedroom apartment and you have four

bathrooms that is kind of unusual right

so then after discussion with your

business manager you decide that anytime

you have number of bathrooms greater

than your bedrooms plus two you are

going to remove those as an outlier okay

so before we do that let's plot a

histogram here again so histogram you

can plot by calling PLT dot hist and our

width is the width of the bar okay so

when you run it you see the most of the

properties are in two properties are

having two bed two bathrooms and then

four six etcetera and there are a few

outliers you know you see here which has

more number of path

okay so here now let's go back to our

original criteria that our business

manager told us which is any time you

have bathroom greater than number of

bedrooms plus two you can mark them as

an outlier so after I come back from a

meeting with business manager I will run

this criteria on my data set and see

what's going on so here I see that I

have this four bedroom property having

seven bathrooms another one is three

bedroom property having six bathrooms so

all of these are outliers which I can

safely remove so I'm going to remove

them by running this and now I get a new

data frame

I still have around seven thousand data

points in that now my data frame looks

pretty much neat and clean so I can now

start preparing it for machine learning

training and for that I have to drop

some unnecessary features so the price

per square foot and the size feature at

this point are unnecessary because for

size we already have BHK feature so this

one can be dropped price per square foot

can also be dropped because this we used

just for outlier - right it did not have

any other use so I will create a new

data frame where I will drop these two

features and my new data frame looks

something like this

all right that's all I had for this

tutorial in the next tutorial we are

going to create a machine learning model

and we'll train it will use grid search

TV to come up with the best model

